
<html dir="">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">

  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.4.0/font/bootstrap-icons.css">
  
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BmbxuPwQa2lc/FVzBcNJ7UAyJxM6wuqIj61tLrc4wSX0szH/Ev+nYRRuWlolflfl" crossorigin="anonymous">

  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <!-- Latest compiled JavaScript -->
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/js/bootstrap.bundle.min.js" integrity="sha384-b5kHyXgcpbZJO/tY9Ul7kGkf1S0CWuKcCD38l8YkeH8z8QjE0GmW1gYU5S9FOnJ0" crossorigin="anonymous"></script>
<style>
  footer{
    bottom:0px;
    position: fixed;
    text-align: center;
    width:100% !important;
    height:6%;
  }
</style>
<script>
//حفظ
  $(function(){
    
     var ee=localStorage.getItem("lastname");
    $(".vemp").text(ee);
    
    /*
    var int=$(".int").text();
   var int2=parseFloat(int).toFixed(3);
   $(".int").text(int2);
   */ 
var arr = [];
var arrp = [];
var arro = [];
var arra = [];
var total = 0;
var total2 = 0;
var total3 = 0;
var total4 = 0;
   function sum() {
for (var i in arr) {
  total += arr[i];
var totalx=parseFloat(total).toFixed(3);
  
  return totalx;
}
}
function sump() {
for (var i in arrp) {
  total2 += arrp[i];
var total2x=parseFloat(total2).toFixed(3);
  
  return total2x;
}
     
   }
   
function sumo() {
for (var i in arro) {
  total3 += arro[i];
  var total3x=parseFloat(total3).toFixed(3);
  return total3x;
  
}
     
   }
function suma() {
for (var i in arra) {
  total4 += arra[i];
var total4x=parseFloat(total4);
  
  return total4x;
}
     
   }

$(".v7").click(function(){
  
var spm= $(".v16").text();
  var ccd=spm / 30;
  var ccd2=parseFloat(ccd).toFixed(3);
var spm2=parseFloat(spm).toFixed(3);
 var oth=ccd2/8;
 var oth2=parseFloat(oth).toFixed(3);
$(".v18").text(oth2);
  $(".v7").text(ccd2);
  $(".v11").text(ccd2);
  $(".v21").text(spm2);

});

var d = new Date();
document.getElementById("dt").innerHTML = d.getMonth() + 1;
document.getElementById("dt").innerHTML += d.getFullYear();
$("#save").click(function(){
  var x="<div class='"+$('#sttp').val()+"'><div class='idd' id='"+$('.v1').text()+"'><div class='iddd'>"+$('.v1').text()+"</div><div id='name'>"+$('.v2').text()+"</div><div id='doec'>"+$('.v3').text()+"</div><div id='cn'>"+$('.v4').text()+"</div><div id='cp'>"+$('.v5').text()+"</div><div id='ra'>"+$('.v6').text()+"</div><div id='ppd'>"+$('.v7').text()+"</div><div id='ts'>"+$('.v21').text()+"</div><div id='nowd'>"+$('.v8').text()+"</div><div id='awd'>"+$('.v9').text()+"</div><div id='nad'>"+$('.v10').text()+"</div><div id='cspd'>"+$('.v11').text()+"</div><div id='tcs'>"+$('.v12').text()+"</div><div id='tad'>"+$('.v13').text()+"</div><div id='ot'>"+$('.v14').text()+"</div><div id='a'>"+$('.v15').text()+"</div><div id='bs'>"+$('.v16').text()+"</div><div id='spd'>"+$('.v17').text()+"</div><div id='ot1'>"+$('.v18').text()+"</div><div id='os'>"+$('.v19').text()+"</div><div id='bvs'>"+$('.v20').text()+"</div><div id='se'>"+$('.v24').text()+"</div><div id='p'>"+$('.v22').text()+"</div><div id='r'>"+$('.v23').text()+"</div></div></div>";
  var xd=$("#dt").text();
 
 $.ajax({
   type: "GET",
   url: "https://ggt21.herokuapp.com/save?val="+x+"&dt="+xd+"",
   success:function(r){
   alert("Saved Successfully!")  
 
       }
  
 });
  
});

$("#qu").click(function(){
  
$("#crq").html("");
var  y=$("#year").text();
 var mn=$("#mont").text();
 $.ajax({
   type: "GET",
   url: "https://ggt21.herokuapp.com/year?year="+y+"&month="+mn+"",
   success:function(r){
var ed = r.replaceAll('_', ' ');
var stff2=$("#sttp2").val();
     $("#rspq").html(ed);
  $("#rspq").children("."+stff2+"").each(function(){
var rid=$(this).find(".idd").children(".iddd").text();
var rn=$(this).find("#name").text();
//var rdoec=$(this).find("#doec").text();
var rcn=$(this).find("#cn").text();
var rnad=$(this).find("#nad").text();
var rcp=$(this).find("#cp").text();
var roh1=$(this).find("#ot1").text();
var rrooh1=parseFloat(roh1);
var rra=$(this).find("#a").text();
var rrra= parseFloat(rra).toFixed(3);

var rnowd=$(this).find("#nowd").text();
var ros=$(this).find("#os").text();
var rros= parseFloat(ros);
var rroh2=rrooh1*rros;
var rroh1=parseFloat(rroh2).toFixed(3);
var rp=$(this).find("#p").text();
var rts=$(this).find("#ts").text();
var rbs=$(this).find("#bs").text();

//collecator
var rex=rnad -30;
var vex=parseFloat(rbs)/ 30 * parseFloat(rnad);

var ziada= parseFloat(rts)-vex + parseFloat(ros) - parseFloat(rra)+rroh1;
var zziada= parseFloat(ziada).toFixed(3);

var prof=parseFloat(rbs)- parseFloat(rcp);
var pprof= parseFloat(prof).toFixed(3);



//<div class='col'>"+rnad+"</div>
var crqt="<div class='row'><div class='col y'>"+rid+"</div><div class='col y'>"+rn+"</div><div class='col y'>"+rcn+"</div><div style='color:red;' class='col y'>"+rnad+"</div><div class='col y'>"+rex+"</div><div class='col y a1 int'>"+rrra+"</div><div class='col y int ov1'>"+rroh1+"</div><div class='col y int'>"+rros+"</div><div class='col y prof1 int'>"+pprof+"</div><div style='color:blue;' class='col y ziad int'>"+zziada+"</div></div>";
$("#crq").append(crqt);

  });

       }

 });
setTimeout(function(){
  $("#crq").find(".ziad").each(function(){
var tt=parseFloat($(this).text());
arr=[];
arr.push(tt);
$("#crqtot").find(".ziad2").text(sum());
  });
 $("#crq").find(".prof1").each(function(){

var tt2=parseFloat($(this).text());

arrp=[];
arrp.push(tt2);
$("#crqtot").find(".prof2").text(sump());
 
  });
  
 $("#crq").find(".ov1").each(function(){

var tt3=parseFloat($(this).text());

arro=[];
arro.push(tt3);
$("#crqtot").find(".ov2").text(sumo());
 
  });
  
 $("#crq").find(".a1").each(function(){

var tt4=parseInt($(this).text());

arra=[];
arra.push(tt4);
$("#crqtot").find(".a2").text(suma());
 
  });
},1000);


});

$("#qqu").click(function(){
  
$("#crq").html("");
var  y=$("#year").text();
 var mn=$("#mont").text();
 var stff=$("#sttp").val();
 $.ajax({
   type: "GET",
   url: "https://ggt21.herokuapp.com/year?year="+y+"&month="+mn+"",
   success:function(r){
var ed = r.replaceAll('_', ' ');

     $("#rspq").html(ed);
     
  var xxxd=$(".v1").text();
//var xrid=$("#rspq").children("'#"+stf+"'").find(".idd").children(".iddd").text();
var xrn=$("#rspq").children("."+stff+"").children("#"+xxxd+"").find("#name").text();
var xrdoec=$("#rspq").children("."+stff+"").children("#"+xxxd+"").find("#doec").text();
var xrcn=$("#rspq").children("."+stff+"").children("#"+xxxd+"").find("#cn").text();
var xrcp=$("#rspq").children("."+stff+"").children("#"+xxxd+"").find("#cp").text();
var xra=$("#rspq").children("."+stff+"").children("#"+xxxd+"").find("#ra").text();
var xppd=$("#rspq").children("."+stff+"").children("#"+xxxd+"").find("#ppd").text();
var xnowd=$("#rspq").children("."+stff+"").children("#"+xxxd+"").find("#nowd").text();
var xawd=$("#rspq").children("."+stff+"").children("#"+xxxd+"").find("#awd").text();
var xnad=$("#rspq").children("."+stff+"").children("#"+xxxd+"").find("#nad").text();
var xcspd=$("#rspq").children("."+stff+"").children("#"+xxxd+"").find("#cspd").text();
var xtcs=$("#rspq").children("."+stff+"").children("#"+xxxd+"").find("#tcs").text();

var xtad=$("#rspq").children("."+stff+"").children("#"+xxxd+"").find("#tad").text();
var xot=$("#rspq").children("."+stff+"").children("#"+xxxd+"").find("#ot").text();
var xa=$("#rspq").children("."+stff+"").children("#"+xxxd+"").find("#a").text();
var xbs=$("#rspq").children("."+stff+"").children("#"+xxxd+"").find("#bs").text();
var xspd=$("#rspq").children("."+stff+"").children("#"+xxxd+"").find("#spd").text();
var xot1=$("#rspq").children("."+stff+"").children("#"+xxxd+"").find("#ot1").text();
var xos=$("#rspq").children("."+stff+"").children("#"+xxxd+"").find("#os").text();
var xbvs=$("#rspq").children("."+stff+"").children("#"+xxxd+"").find("#bvs").text();
var xts=$("#rspq").children("."+stff+"").children("#"+xxxd+"").find("#ts").text();
var xse=$("#rspq").children("."+stff+"").children("#"+xxxd+"").find("#se").text();
var xp=$("#rspq").children("."+stff+"").children("#"+xxxd+"").find("#p").text();
var xr=$("#rspq").children("."+stff+"").children("#"+xxxd+"").find("#r").text();
setTimeout(function(){
$(".v2").text(xrn);
$(".v3").text(xrdoec);
$(".v4").text(xrcn);
$(".v5").text(xrcp);
$(".v6").text(xra);
$(".v7").text(xppd);
$(".v8").text(xnowd);
$(".v9").text(xawd);
$(".v10").text(xnad);
$(".v11").text(xcspd);

$(".v12").text(xtcs);
$(".v13").text(xtad);
$(".v14").text(xot);
$(".v15").text(xa);
$(".v16").text(xbs);
$(".v17").text(xspd);
$(".v18").text(xot1);
$(".v19").text(xos);
$(".v20").text(xbvs);
$(".v21").text(xts);
$(".v24").text(xse);
$(".v22").text(xp);
$(".v23").text(xr);


var actw = xnad - 30;
var cuts = xnad * xppd;
$(".v12").text(cuts);
$(".v8").text(actw);
var rsal=xbs - cuts;
$(".v21").text(rsal);
var cad=parseInt(xa) + parseInt(xos) + parseInt(rsal);
$(".v21").text(cad);
},1000);
       }
  
 });
  
});

//get full
$("#fullr").html("");
var  y=$("#year").text();
 var mn=$("#mont").text();
 $.ajax({
   type: "GET",
   url: "https://ggt21.herokuapp.com/year?year="+y+"&month="+mn+"",
   success:function(r){
var ed = r.replaceAll('_', ' ');
 
     $("#fullr").html(ed);
    }
 });
 $("#sad").click(function(){
   var ff=$("#aid").text()
   var gg=$("#fullr").find("#"+ff+"").children("#name").text();
var bb=$("#fullr").find("#"+ff+"").children("#nad").text();
var oo=$("#fullr").find("#"+ff+"").children("#os").text();
var aa=$("#fullr").find("#"+ff+"").children("#a").text();
var ooh=parseFloat($("#fullr").find("#"+ff+"").children("#ot1").text()).toFixed(3);
  
   $("#anm").text(gg);
 $("#aad").text(bb);
 $("#oo").text(oo);
 $("#aa").text(aa);
 $("#othr").text(ooh);
 });
 
 $("#scut").click(function(){
var ff2=$("#aid").text();
// $("#fullr").find("#123").children("#tad").remove();
 $("#fullr").find("#"+ff2+"").children("#nad").text($('#aad').text());
 $("#fullr").find("#"+ff2+"").children("#os").text($('#oo').text());
 $("#fullr").find("#"+ff2+"").children("#a").text($('#aa').text());
 $("#fullr").find("#"+ff2+"").children("#ot1").text($('#othr').text());

var xd2=$("#dt").text();
var cf=$("#fullr").html();
var b = cf.replaceAll(/\s+/g, '_');
 

 $.ajax({
   type: "GET",
   url: "https://ggt21.herokuapp.com/abc?dt2="+xd2+"&val2="+b+"",
   success:function(r){
     alert("Saved");
   },
   error:function(e){
     alert(e.code);
   }
 });
 });
 $("#del").click(function(){
  var dn=$(".v1").text();
  var dt3=$("#dt").html();
  var ii=$("#fullr").find("#"+dn+"").children("#name").text();
 $("#fullr").find("#"+dn+"").parent().remove();
   var upd=$("#fullr").html();
  var upd2= upd.replaceAll(/\s+/g, '_');
 alert($("#fullr").html());
 $.ajax({
   type: "GET",
   url: "https://ggt21.herokuapp.com/abc?dt2="+dt3+"&val2="+upd2+"",
   success:function(r){
  alert(ii+": (has been removed)");
 
   },
   error:function(e){
     alert(e.code);
   }
 });
 });
 $("#saveuser").click(function(){
  var unn=usern.value;
  var upp=userp.value;
var uut=usertt.value;

   $.ajax({
     type:"GET",
     url:"https://ggt21.herokuapp.com/usersave?usern="+unn+"&userp="+upp+"&usert="+uut,
   success:function(r){
     
       alert(r);
     }
     
   });
 });
});

</script>
<style type="text/css" media="all">
  .n{
    background-color: yellow;
    color:red;
  }
  .nn{
   border-color: white !important; 
      }
  .col{
    border:solid 1px black;
    text-align: center;
  }
  .y{
    min-height: 50px !important;
    min-width: 100px !important;
  }
</style>
<div style="display:none;" class="page" id="salpage">
 <div id="aid" contenteditable="true" placeholder="ID NUMBER" class="col">ID</div>
     <div id="sad" class="col btn-success">search</div>
    <div class="row">
      <div  class="col btn-success">Name</div>
 <div  class="col btn-success">Abcence Days</div>
 <div  class="col btn-success">OT (HR)</div>
 <div  class="col btn-success">OT Paye</div>
<div  class="col btn-success">Advance Paye</div>
 
    
    </div>
<div class="row">
      <div id="anm" class="col y">Name</div>
 <div id="aad" contenteditable="true" class="col y">0</div>
 <div id="othr" contenteditable="true" class="col y">0</div>
 <div id="oo" contenteditable="true" class="col y">0</div>
 <div id="aa" contenteditable="true" class="col y">0</div>
    
    </div>
    <div id="scut" style="text-align:center;" class="btn-success">
      save
    </div>
 </div>
 <div contenteditable="" style="display:none;height:200px;" id="fullr">
    res
  </div>
<div class="page" id="home">
 
   <div id="row">
     <div onclick="$('.page').hide();$('#regpage').show();" class="col btn-primary">
       HR-MANAGMENT
     </div>
     <div onclick="$('.page').hide();$('#quiery').show();" class="col btn-primary">
       Query
     </div>
   

<div onclick="$('.page').hide();$('#salpage').show();" class="col btn-primary">
      Sallary Systems
     </div>
  <div onclick="$('.page').hide();$('#user').show();" class="col btn-primary">
      User Adminstration
     </div>
     
   </div>
   
 </div><!--home-->
<!--user-->
<div style="display:none;" class="page" id="user">
  <div class="">
    
  </div>
  <center>
  <input placeholder="UserName" type="text" name="" id="usern" value="" />
  <input placeholder="Password" type="text" name="" id="userp" value="" /><br>
  <select name="" id="usertt">
<option value="Authorize">Authorize Type:</option>
<option value="user">User</option>
 <option value="admin">Admin</option>
  
  </select>
  <div id="saveuser" class="btn-primary">
    Save
  </div>
  </center>
   </div>
   <!--user-->
<div style="display:none;" class="page" id="quiery">
   <div class="row">
     <div class="col btn-success">Year</div>
     <div id="year" contenteditable="" class="col">2021</div>
     </div>
 <div class="row">
 <div class="col btn-success">Month</div>
 <div id="mont" contenteditable="" class="col">9</div>
     </div>
<div class="row">
 <div class="col btn-success">Stuff Type</div>
<select id="sttp2" class="col"><option value="Employee">Employee</option><option value="Other">Other</option></select>
 </div>
    
     <div class="row">
  <div class="col y btn-success">ID </div>
<div class="col y btn-success">Name</div>
<div class="col y btn-success">Cont.Name</div>
<div class="col y btn-success">Abcence</div>
<div class="col y btn-success">Work.days</div>
<div class="col y btn-success">Advance</div>
<div class="col y btn-success">OV(AMT)</div>
<div class="col y btn-success">OV(HR)</div>
<div class="col btn-success">Profit</div>
<div class="col btn-success">Net Salary</div>
     </div>
<div id="qu" style="text-align:center;" class="btn-success">
   <i class="bi bi-patch-question">  </i>   Quiery
     </div>
 <div id="crq"></div>
<div id="crqtot">
<div class='row'><div class='col y nn'></div><div class='col y nn'></div><div class='col y nn'></div><div style='color:red;' class='col y nn'></div><div class='col y nn'></div><div class='col y a2 n int'>Advance</div><div class='col y n int ov2'>ovhr</div><div class='col y n int'>ovtime</div><div class='col y prof2 n int'></div><div class='col y ziad2 n int'></div></div>

</div>
 
     <div style="display:none;" id="rspq">
       
     </div>

     </div>
 
<div class="page" style="display:none;" id="regpage">
   <div style="display:none;" id="dt">
   </div>
<div class="row">
<div class="btn-success col">Staff Type</div>
 <select id="sttp" class="col"><option value="Employee">Employee</option><option value="Other">Other</option></select>
</div>
<div class="row">
  <div class="btn-success col">Created By</div>
 <div class="vemp y col">employee</div>
 </div>
<div class="row">
  <div class="btn-success col">Id</div>
 <div contenteditable="true" class="v1 y col"></div>
 </div>
 <div class="row">
  <div class="btn-success col">Name</div>
 <div contenteditable="true" class="v2 y col"></div>
 </div>
 <div class="row">
  <div class="btn-success col">Date of Expa.Card</div>
 <div contenteditable="true" class="v3 y col"></div>
 </div>
 <div class="row">
  <div class="btn-success col">Contract Name</div>
 <div contenteditable="true" class="v4 y col"></div>
 </div>
 <div class="row">
  <div class="btn-success col">Contract Price</div>
 <div contenteditable="true" class="v5 y col int">0</div>
 </div>
 <div class="row">
  <div class="btn-success col">Basic Sallary</div>
 <div contenteditable="true" class="v16 y col int">0</div>
 </div>
 <div class="row">
  <div class="btn-success col">Price Per Day</div>
 <div contenteditable="true" class="v7 y col int">0</div>
 </div>
 <div class="row">
  <div class="btn-success col">Recived Amount</div>
 <div contenteditable="true" class="v6 y col int">0</div>
 </div>

 <div class="row">
  <div class="btn-success col">Total Sallary</div>
 <div contenteditable="true" class="v21 y col int">0</div>
 </div>
 
 
 <div class="row">
  <div class="btn-success col">No.of Working Days</div>
 <div class="v8 y col">0</div>
 </div>
 <div class="row">
  <div class="btn-success col">Act.Working Days</div>
 <div class="v9 y col"></div>
 </div>
 <div class="row">
  <div class="btn-success col">No.Abcence Day</div>
 <div class="v10 y col">0</div>
 </div>
 <div class="row">
  <div class="btn-success col">Cut Sallary Per day</div>
 <div class="v11 y col int">0</div>
 </div>
 <div class="row">
  <div class="btn-success col">Total Cut Sallary</div>
 <div class="v12 y col int">0</div>
 </div>
 <div class="row">
  <div class="btn-success col">Total Abcence day</div>
 <div class="v13 y col">0</div>
 </div>
 <div class="row">
  <div class="btn-success col">OT(HR)</div>
 <div contenteditable="true" class="v14 y col">0</div>
 </div>
 <div class="row">
  <div class="btn-success col">Advance</div>
 <div contenteditable="true" class="v15 y col">0</div>
 </div>

 <div class="row">
  <div class="btn-success col">Sallary Per Day</div>
 <div contenteditable="true" class="v17 y col int">0</div>
 </div>
 <div class="row">
  <div class="btn-success col">OT1(HR)</div>
 <div contenteditable="true" class="v18 y col">0</div>
 </div>
 <div class="row">
  <div class="btn-success col">OT Sallary</div>
 <div contenteditable="true" class="v19 y col int">0</div>
 </div>
 <div class="row">
  <div class="btn-success col">Basic Vs Sallary</div>
 <div contenteditable="true" class="v20 y col int">0</div>
 </div>

 <div class="row">
  <div class="btn-success col">Staff Expence</div>
 <div contenteditable="true" class="v24 y col int">0</div>
 </div>
 <div class="row">
  <div class="btn-success col">Profit</div>
 <div contenteditable="true" class="v22 y col int">0</div>
 </div>
 <div class="row">
  <div class="btn-success col">Remarks</div>
 <div contenteditable="true" class="v23 y col"></div>
 </div>
<div class="row">
 <div style="text-align:center;" id="save" class="btn-primary col">Save</div>
<div style="text-align:center;" id="del" class="btn-primary col">Delete</div>
 <div style="text-align:center;" id="qqu" class="btn-primary col">Query</div>

</div>
 </div><br /><br />

<footer onclick="$('.page').hide();$('#home').show();" class="btn-primary"><i class="bi bi-box-arrow-left">  </i>Home</footer>
</body>
